<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Html-Qrcode Demo</title>
		
		<script src="/qr/html5-qrcode/2.2.1/js/html5-qrcode.min.js"></script>
		<script>
			function docReady(fn) {
				// see if DOM is already available
				if (document.readyState === "complete"
					|| document.readyState === "interactive") {
					// call on next available tick
					setTimeout(fn, 1);
				} else {
					document.addEventListener("DOMContentLoaded", fn);
				}
			}

			docReady(function () {
				var resultContainer = document.getElementById('qr-reader-results');
				var lastResult, countResults = 0;
				/*
				function onScanSuccess(decodedText, decodedResult) {
					if (decodedText !== lastResult) {
						++countResults;
						lastResult = decodedText;
						// Handle on success condition with the decoded message.
						console.log(`Scan result ${decodedText}`, decodedResult);
						alert(`Scan result ${decodedText}`, decodedResult);
						//this will stop the scanner (video feed) and clear the scan area.
						html5QrcodeScanner.clear();
					}
				}
				
				function onScanFailure(error) {
					// handle scan failure, usually better to ignore and keep scanning.
					// for example:
					console.warn(`Code scan error = ${error}`);
					alert(`Code scan error = ${error}`);
					//this will stop the scanner (video feed) and clear the scan area.
					html5QrcodeScanner.clear();

				}
				
				var html5QrcodeScanner = new Html5QrcodeScanner(
					"qr-reader", { fps: 10, qrbox: 250 });
				html5QrcodeScanner.render(onScanSuccess);
				*/
				function onScanSuccess(decodedText, decodedResult) {
					// Handle on success condition with the decoded text or result.
					console.log(`Scan result: ${decodedText}`, decodedResult);
					alert(`Scan result ${decodedText}`, decodedResult);
				}

				function onScanError(errorMessage) {
					// handle on error condition, with error message
					console.warn(`Code scan error = ${errorMessage}`);
					alert(`Code scan error = ${errorMessage}`);
				}

				var html5QrcodeScanner = new Html5QrcodeScanner(
					"reader", { fps: 10, qrbox: 250 });
				html5QrcodeScanner.render(onScanSuccess, onScanError);
		</script>
	</head>
	
	<body>
		<p>- alert</p>
		<p>- ganti success n failed result</p>
		<div id="qr-reader" style="width:500px"></div>
		<div id="qr-reader-results"></div>
	</body>
</html>